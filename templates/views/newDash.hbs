<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chart Example</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-doughnutlabel"></script>

  <style>
    body{
     
    height: auto;
    margin-top: auto;
    display: flex;
    }

    .div-container {
  display: flex;
  flex-direction: column;
  width: 100%;
}

    .box-div{
      display: flex;
    justify-content: space-around;
    height: 190px;
    width: 98%;
    margin-left: 10px;
    border-radius: 17px;
    margin-top: 16px;
    }

    .div1{
      background-color: yellow;
      width: 24.5%;
      height: auto;
      margin: 10px;
      border-radius: 17px;
    }
    .div1 img {
      width: 20px;
      height: 20px;
    }
    .div2{
      background-color: rgb(171, 127, 24);
      width: 24.5%;
      height: auto;
      margin: 10px;
      
      border-radius: 17px;
    }
    .div3{
      background-color: rgb(45, 45, 11);
      width: 24.5%;
      height: auto;
      margin: 10px;
      border-radius: 17px;
    }
    .div4{
      background-color: rgb(19, 163, 33);
      width: 24.5%;
      height: auto;
      margin: 10px;
      border-radius: 17px;
    }
    .second-div{
      display: flex;
    justify-content: space-around;
    height: 467px;
    width: 98%;
    margin-left: 10px;
    border-radius: 17px;
    margin-top: 16px;
    }
   .bar-div{
   height: 98%;
    width: 68%;
    box-shadow: 5px 10px 10px #312c2c;

    background-color: cornsilk;
    border-radius: 20px;
    margin-top: 5px;
   }
   .pie-div{
height: 98%;
    width: 30%;
    background-color: rgb(211, 209, 201);
    border-radius: 20px;
    margin-top: 5px;
   }
   #myDoughnutChart{
    display: block;
    box-sizing: border-box;
    height: 464px;
    width: 300px;
    margin-left: 7px;
}
   
    
  </style>
</head>
<body>
      <div class="div-container">
  <div class="box-div">
    
    <div class="div1">
       <h5 style="text-align:center">Total No Of Registrations </h5>
     <p id="total"style="text-align:center">{{totalStudentCount}}</p>
    </div>

    <div class="div2">
       <h5 style="text-align:center">Total No Of Registrations of Current Month</h5>
     <p id="total"style="text-align:center">{{totalStudentsCurrentMonth}}</p>
    </div>

    <div class="div3">
      <h5 style="text-align:center">Total Pending Fees </h5>
     <p id="total"style="text-align:center">{{TotalPendingFee}}</p>
    </div>
    <div class="div4"></div>
    <div class="div4">
      <h5 style="text-align:center">Total Paper Fees </h5>
     <p id="total"style="text-align:center">{{grandTotal}}</p>
    </div>
    
  </div>
 <div class="second-div">
 <div class="bar-div">
  
    <canvas id="myBarChart"></canvas>
    </div>
    <div class="pie-div">
    <canvas id="myDoughnutChart"></canvas>
    </div>
    </div> 
</div>
  <script>
  
    // Assuming the server side passes the data correctly to these variables
    const doughnutLabels = {{json doughnutLabels}};
    const doughnutValues = {{json doughnutValues}};
    const barLabels = {{json barLabels}};
    const barValues = {{json barValues}};

    // Doughnut Chart
   const doughnutCtx = document.getElementById('myDoughnutChart').getContext('2d');

const myDoughnutChart = new Chart(doughnutCtx, {
  type: 'doughnut',
  data: {
    labels: doughnutLabels,
    datasets: [{
      label: 'Number of Students',
      data: doughnutValues,
      backgroundColor: [
        'rgb(255, 99, 132)',
        'rgb(54, 162, 235)',
        'rgb(255, 205, 86)',
      ],
      borderColor: [
        'rgb(255, 99, 132)',
        'rgb(54, 162, 235)',
        'rgb(255, 205, 86)',
      ],
      borderWidth: 1,
      hoverOffset: 30,
       depthOffset: 10, // Adjust the offset on hover for this dataset
    }]
  },
  options: {
    responsive: true,
    maintainAspectRatio: false,
    cutout: '70%',
    plugins: {
      doughnutlabel: {
        labels: [{
          text: 'Number of Students',
          font: {
            size: '16'
          },
          color: '#000',
          shadowColor: 'rgba(0,0,0,0.75)',
          shadowBlur: 10,
          hoverShadowBlur: 12,
          shadowOffsetX: 10,
          shadowOffsetY: 14,
          offset: 0,
        }],
      },
    },
    onHover: (event, chartElement) => {
      // Apply hover effect only if hovering over a dataset (not labels or other elements)
      if (chartElement && chartElement[0]) {
        const hoveredDatasetIndex = chartElement[0].datasetIndex;

        // Set hover effect for the specific dataset
        myDoughnutChart.setDatasetVisibility(hoveredDatasetIndex, true);

        // Reset other datasets
        myDoughnutChart.data.datasets.forEach((dataset, index) => {
          if (index !== hoveredDatasetIndex) {
            myDoughnutChart.setDatasetVisibility(index, false);
          }
        });
      }
    },
  }
});


        const barCtx = document.getElementById('myBarChart').getContext('2d');
    const myBarChart = new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: barLabels, // Corrected to use barLabels
        datasets: [{
          label: 'Number of Students Registered',
          data: barValues, // Corrected to use barValues
          backgroundColor: 'rgba(54, 162, 235, 0.2)',
          borderColor: 'rgba(54, 162, 235, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          
          y: {
            beginAtZero: true
          }
        }
      }
    });
    
  </script>
</body>
</html>
